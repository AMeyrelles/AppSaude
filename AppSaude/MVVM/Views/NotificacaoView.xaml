<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local ="clr-namespace:AppSaude.MVVM.ViewModels" 
             x:Class="AppSaude.MVVM.Views.NotificacaoView"
             Title="Notificações">




    <!-- Styles da Página HOME  -->
    <ContentPage.Resources>
        <!-- Style dos Buttons -->
        <Style TargetType="Button">
            <Setter Property="Padding" Value="10,10,10,10"/>
            <Setter Property="HeightRequest" Value="140"/>
            <Setter Property="WidthRequest" Value="140"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="CornerRadius" Value="8"/>
        </Style>

        <!-- Style das Label -->
        <Style TargetType="Label">
            <Setter Property="FontSize" Value="Medium"/>
            <Setter Property="TextColor" Value="Black"/>
            <Setter Property="FontSize" Value="Small"/>
            <Setter Property="HorizontalOptions" Value="Center"/>
            <Setter Property="VerticalOptions" Value="Center"/>
            <Setter Property="CharacterSpacing" Value="2"/>
        </Style>

        <!-- Style do Border -->
        <Style TargetType="Border">
            <Setter Property="BackgroundColor" Value="White"/>
            <Setter Property="HorizontalOptions" Value="Center"/>
            <Setter Property="VerticalOptions" Value="Center"/>
            <Setter Property="WidthRequest" Value="290"/>
        </Style>

    </ContentPage.Resources>
    <ScrollView>
        <Grid>
            
        <Grid.RowDefinitions>
            <RowDefinition/>           
        </Grid.RowDefinitions>
            
            <VerticalStackLayout                    
                   Grid.Row="1">

                        <!-- Lista de Notificações de Alarmes 
                          <Label
                          CharacterSpacing="5"
                          Text="Alarmes" FontSize="20" FontAttributes="Bold" Margin="0,20,0,10" />
                        -->
                <CollectionView             
                     ItemsSource="{Binding NotificacaoAlarmes}" Margin="0,20,0,20"
                     SelectedItem="{Binding NotificacaoAlarmeAtual}"
                     SelectionMode="Single"
                     >
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <!-- Lista de Notificações dos Alarmes -->

                                <Border 
                                     StrokeThickness="1" Stroke="Black"
                                     Padding="0" Margin="0,0,0,10">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="6" />
                                    </Border.StrokeShape>

                                    <VerticalStackLayout>
                                        <!--  Implementado para deletar deslizando -->
                                        <SwipeView>
                                            <SwipeView.LeftItems>
                                                <SwipeItems>
                                                    <SwipeItem BackgroundColor="#05395e"
                                                      Command = "{Binding Source = {RelativeSource AncestorType = {x:Type local:MainViewModel}}, Path = DeleteNACommand}"                                            
                                                      Text="Excluir" />
                                                </SwipeItems>
                                            </SwipeView.LeftItems>

                                            <Grid RowDefinitions="Auto, Auto, Auto, Auto">
                                                <Border x:Name="alarmBorder" StrokeThickness="0" Stroke="White" BackgroundColor="#195986">
                                                    <HorizontalStackLayout                                                  
                                                Grid.Row="0"
                                                Spacing="0" HorizontalOptions="Center">
                                                        <Image Source="despertador_64px" WidthRequest="30" HeightRequest="30" />
                                                        <Label                                              
                                                   CharacterSpacing="6"
                                                   TextColor="White"
                                                   Text="Alarme" FontSize="20" FontAttributes="Bold" Margin="0,5,0,10" Padding="10,0,0,0"
                                                />

                                                    </HorizontalStackLayout>
                                                </Border>
                                                <Label
                                                      x:Name="lblMName"  
                                                      Grid.Row="1"
                                                      Text="{Binding MedicationNameNA}" FontSize="30" 
                                                />
                                                <Label 
                                                   Grid.Row="2"
                                                      Text="às"
                                                />
                                                <Label 
                                                     Grid.Row="3"
                                                     Text="{Binding ReminderTimeNA, StringFormat='{0:hh\\:mm}h'}" FontSize="20" 
                                                />
                                            </Grid>
                                        </SwipeView>
                                    </VerticalStackLayout>
                                </Border>
                            </Grid>

                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>

                <!-- Lista de Agendamentos  -->
                <CollectionView                        
            ItemsSource="{Binding Agendamentos}">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Border
                                      StrokeThickness="1" Stroke="Black"
                                     Margin="0,0,0,10">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="6" />
                                    </Border.StrokeShape>

                                    <VerticalStackLayout HorizontalOptions="Center">
                                        <Border StrokeThickness="0" Stroke="White" BackgroundColor="#195986">
                                            <HorizontalStackLayout                                            
                                                 Grid.Row="0"
                                                 Spacing="1" HorizontalOptions="Center">

                                                <Image HorizontalOptions="Start" Source="calendar" WidthRequest="30" HeightRequest="30" />

                                                <Label                                                   
                                                  CharacterSpacing="5"
                                                  TextColor="White"
                                                  Text="Agendamento" FontSize="20" FontAttributes="Bold" Margin="0,5,0,10" Padding="10,0,0,0"/>

                                            </HorizontalStackLayout>
                                        </Border>


                                        <Label Text="{Binding Specialty}" FontSize="30" />
                                        <Label 
                                           Grid.Row="1"
                                           Text=" em " />

                                        <Label 
                                           Grid.Row="2"
                                           Text="{Binding SelectedDate, StringFormat='{0:dd/MM/yyyy}'}" FontSize="20" />

                                        <Label 
                                          Grid.Row="3"
                                          Text=" às " />

                                        <Label 
                                          Grid.Row="4"
                                          Text="{Binding AppointmentDateTime, StringFormat='{0:hh\\:mm}h'}" FontSize="20" />

                                    </VerticalStackLayout>
                                </Border>
                            </Grid>

                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>
    
</ContentPage>